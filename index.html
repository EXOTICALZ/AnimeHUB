<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DownAnyL - Download videos from any platform</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background-color: #0F1419;
            color: #FFFFFF;
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Cloudflare Loading Animation */
        .cloudflare-loading {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #1d1d1d 0%, #0a0a0a 100%);
            z-index: 9999;
            justify-content: center;
            align-items: center;
            flex-direction: column;
        }

        .cloudflare-loading.show {
            display: flex;
        }

        /* Cloudflare Logo Animation */
        .cf-logo-container {
            position: relative;
            width: 150px;
            height: 150px;
            margin-bottom: 50px;
        }

        .cf-logo {
            width: 100%;
            height: 100%;
            animation: cfLogoPulse 2s ease-in-out infinite;
        }

        @keyframes cfLogoPulse {
            0%, 100% { 
                transform: scale(1);
                filter: drop-shadow(0 0 20px rgba(246, 133, 27, 0.6));
            }
            50% { 
                transform: scale(1.1);
                filter: drop-shadow(0 0 40px rgba(246, 133, 27, 0.9));
            }
        }

        /* Power Rings Animation */
        .power-ring {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            border: 3px solid rgba(246, 133, 27, 0.4);
            border-radius: 50%;
            animation: powerRingExpand 2s ease-out infinite;
        }

        .power-ring:nth-child(1) {
            width: 100%;
            height: 100%;
            animation-delay: 0s;
        }

        .power-ring:nth-child(2) {
            width: 100%;
            height: 100%;
            animation-delay: 0.4s;
        }

        .power-ring:nth-child(3) {
            width: 100%;
            height: 100%;
            animation-delay: 0.8s;
        }

        @keyframes powerRingExpand {
            0% {
                transform: translate(-50%, -50%) scale(0.8);
                opacity: 1;
                border-width: 4px;
            }
            100% {
                transform: translate(-50%, -50%) scale(1.8);
                opacity: 0;
                border-width: 1px;
            }
        }

        /* Energy Particles */
        .energy-particles {
            position: absolute;
            width: 200px;
            height: 200px;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .particle {
            position: absolute;
            width: 4px;
            height: 4px;
            background: #F6851B;
            border-radius: 50%;
            opacity: 0;
            animation: particleFloat 3s ease-in-out infinite;
        }

        .particle:nth-child(1) { left: 50%; top: 0%; animation-delay: 0s; }
        .particle:nth-child(2) { left: 85%; top: 15%; animation-delay: 0.3s; }
        .particle:nth-child(3) { left: 100%; top: 50%; animation-delay: 0.6s; }
        .particle:nth-child(4) { left: 85%; top: 85%; animation-delay: 0.9s; }
        .particle:nth-child(5) { left: 50%; top: 100%; animation-delay: 1.2s; }
        .particle:nth-child(6) { left: 15%; top: 85%; animation-delay: 1.5s; }
        .particle:nth-child(7) { left: 0%; top: 50%; animation-delay: 1.8s; }
        .particle:nth-child(8) { left: 15%; top: 15%; animation-delay: 2.1s; }

        @keyframes particleFloat {
            0% {
                opacity: 0;
                transform: scale(0) translateY(0);
            }
            50% {
                opacity: 1;
                transform: scale(1.5) translateY(-20px);
            }
            100% {
                opacity: 0;
                transform: scale(0.5) translateY(-40px);
            }
        }

        /* Progress Bar - Orange */
        .cf-progress-container {
            width: 400px;
            margin-bottom: 30px;
        }

        .cf-progress-bar {
            width: 100%;
            height: 6px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
            overflow: hidden;
            position: relative;
            box-shadow: 0 0 20px rgba(246, 133, 27, 0.2);
        }

        .cf-progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #F6851B, #FF9500, #F6851B);
            background-size: 200% 100%;
            width: 0%;
            animation: cfProgressFill 3s ease-out forwards, cfProgressShine 2s ease-in-out infinite;
            box-shadow: 0 0 20px rgba(246, 133, 27, 0.8);
            position: relative;
        }

        .cf-progress-fill::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
            animation: cfProgressGlare 1.5s ease-in-out infinite;
        }

        @keyframes cfProgressFill {
            0% { width: 0%; }
            20% { width: 25%; }
            40% { width: 50%; }
            60% { width: 75%; }
            80% { width: 90%; }
            100% { width: 100%; }
        }

        @keyframes cfProgressShine {
            0%, 100% { background-position: 0% 0%; }
            50% { background-position: 100% 0%; }
        }

        @keyframes cfProgressGlare {
            0% { transform: translateX(-100%); }
            100% { transform: translateX(400%); }
        }

        /* Status Text */
        .cf-status-container {
            text-align: center;
        }

        .cf-status-text {
            font-size: 20px;
            color: #FFFFFF;
            font-weight: 600;
            margin-bottom: 12px;
            animation: cfTextPulse 2s ease-in-out infinite;
            text-shadow: 0 0 20px rgba(246, 133, 27, 0.5);
        }

        @keyframes cfTextPulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.7; }
        }

        .cf-status-subtext {
            font-size: 14px;
            color: rgba(255, 255, 255, 0.6);
            max-width: 400px;
            line-height: 1.6;
        }

        /* Security Badge */
        .cf-security-badge {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            padding: 12px 24px;
            background: rgba(246, 133, 27, 0.1);
            border: 2px solid rgba(246, 133, 27, 0.3);
            border-radius: 8px;
            margin-top: 20px;
            animation: badgePulse 2s ease-in-out infinite;
        }

        @keyframes badgePulse {
            0%, 100% { 
                box-shadow: 0 0 20px rgba(246, 133, 27, 0.3);
                border-color: rgba(246, 133, 27, 0.3);
            }
            50% { 
                box-shadow: 0 0 40px rgba(246, 133, 27, 0.6);
                border-color: rgba(246, 133, 27, 0.6);
            }
        }

        .cf-security-icon {
            width: 20px;
            height: 20px;
        }

        .cf-security-text {
            font-size: 13px;
            color: #F6851B;
            font-weight: 600;
            letter-spacing: 0.5px;
        }

        /* Bottom Navigation */
        .bottom-nav {
            position: fixed;
            bottom: 0;
            left: 0;
            right: 0;
            height: 70px;
            background-color: #1A1F28;
            display: flex;
            justify-content: space-around;
            align-items: center;
            box-shadow: 0 -4px 12px rgba(0, 0, 0, 0.3);
            z-index: 100;
        }

        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 4px;
            cursor: pointer;
            padding: 8px;
            color: #8B95A1;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            position: relative;
        }

        .nav-item::before {
            content: '';
            position: absolute;
            top: 0;
            left: 50%;
            transform: translateX(-50%) scaleX(0);
            width: 40px;
            height: 3px;
            background-color: #00BCD4;
            border-radius: 0 0 3px 3px;
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-item.active {
            color: #00BCD4;
        }

        .nav-item.active::before {
            transform: translateX(-50%) scaleX(1);
        }

        .nav-item svg {
            transition: transform 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .nav-item.active svg {
            transform: scale(1.1);
        }

        .nav-label {
            font-size: 12px;
            font-weight: 500;
        }

        /* Pages */
        .page {
            display: none;
            padding: 20px 20px 90px 20px;
            min-height: 100vh;
            animation: fadeSlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .page.active {
            display: block;
        }

        @keyframes fadeSlideIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Container */
        .container {
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
        }

        /* Header */
        .header {
            text-align: center;
            margin-bottom: 40px;
            animation: headerFloat 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes headerFloat {
            from {
                opacity: 0;
                transform: translateY(-30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .logo {
            display: flex;
            justify-content: center;
            margin-bottom: 16px;
            animation: logoRotate 1s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes logoRotate {
            from {
                opacity: 0;
                transform: scale(0.5) rotate(-180deg);
            }
            to {
                opacity: 1;
                transform: scale(1) rotate(0deg);
            }
        }

        .logo svg {
            filter: drop-shadow(0 4px 12px rgba(0, 188, 212, 0.4));
            transition: transform 0.3s ease;
        }

        .logo:hover svg {
            transform: scale(1.05) rotate(5deg);
        }

        .title {
            font-size: 36px;
            font-weight: 600;
            color: #FFFFFF;
            margin-bottom: 8px;
            background: linear-gradient(135deg, #00BCD4 0%, #00ACC1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: titleGlow 2s ease-in-out infinite;
        }

        @keyframes titleGlow {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.8; }
        }

        .subtitle {
            font-size: 15px;
            color: #8B95A1;
            animation: subtitleSlide 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.2s both;
        }

        @keyframes subtitleSlide {
            from {
                opacity: 0;
                transform: translateY(10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Input Section */
        .input-section {
            margin-bottom: 20px;
            animation: inputSlide 0.6s cubic-bezier(0.4, 0, 0.2, 1) 0.3s both;
        }

        @keyframes inputSlide {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .input-group {
            display: flex;
            gap: 12px;
        }

        .input-wrapper {
            flex: 1;
            position: relative;
        }

        .input-icon {
            position: absolute;
            left: 16px;
            top: 50%;
            transform: translateY(-50%);
            color: #8B95A1;
            pointer-events: none;
            transition: color 0.3s ease;
        }

        input[type="text"] {
            width: 100%;
            padding: 16px 16px 16px 48px;
            background-color: #1A1F28;
            border: 2px solid #2A3441;
            border-radius: 12px;
            color: #FFFFFF;
            font-size: 15px;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        }

        input[type="text"]:focus {
            outline: none;
            border-color: #00BCD4;
            box-shadow: 0 0 0 4px rgba(0, 188, 212, 0.1);
        }

        input[type="text"]:focus + .input-icon {
            color: #00BCD4;
        }

        button {
            padding: 16px 28px;
            background: linear-gradient(135deg, #00BCD4 0%, #00ACC1 100%);
            color: #FFFFFF;
            border: none;
            border-radius: 12px;
            font-size: 15px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            box-shadow: 0 4px 12px rgba(0, 188, 212, 0.3);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(0, 188, 212, 0.4);
        }

        button:active {
            transform: translateY(0);
        }

        button:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            transform: none;
        }

        /* Video Preview */
        .video-preview {
            display: none;
            background-color: #1A1F28;
            border-radius: 16px;
            overflow: hidden;
            margin-bottom: 20px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.2);
            animation: cardSlideIn 0.5s cubic-bezier(0.4, 0, 0.2, 1);
        }

        @keyframes cardSlideIn {
            from {
                opacity: 0;
                transform: scale(0.95) translateY(20px);
            }
            to {
                opacity: 1;
                transform: scale(1) translateY(0);
            }
        }

        .video-preview.show {
            display: block;
        }

        /* Video Player */
        .video-player-container {
            position: relative;
            width: 100%;
            height: 0;
            padding-bottom: 56.25%; /* 16:9 aspect ratio */
            background-color: #000;
            overflow: hidden;
        }

        .video-player {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .video-thumbnail {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            cursor: pointer;
            transition: opacity 0.3s ease;
        }

        .video-thumbnail.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .play-button-overlay {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            width: 80px;
            height: 80px;
            background: rgba(0, 188, 212, 0.9);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
            z-index: 10;
        }

        .play-button-overlay:hover {
            transform: translate(-50%, -50%) scale(1.1);
            background: rgba(0, 188, 212, 1);
            box-shadow: 0 0 30px rgba(0, 188, 212, 0.6);
        }

        .play-button-overlay.hidden {
            display: none;
        }

        .play-button-overlay svg {
            margin-left: 5px;
        }

        /* Video Controls */
        .video-controls {
            position: absolute;
            bottom: 0;
            left: 0;
            right: 0;
            background: linear-gradient(to top, rgba(0,0,0,0.8), transparent);
            padding: 20px 15px 15px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .video-player-container:hover .video-controls,
        .video-controls.show {
            opacity: 1;
        }

        .video-progress {
            width: 100%;
            height: 5px;
            background-color: rgba(255, 255, 255, 0.3);
            border-radius: 3px;
            cursor: pointer;
            margin-bottom: 10px;
            overflow: hidden;
        }

        .video-progress-filled {
            height: 100%;
            background-color: #00BCD4;
            width: 0%;
            transition: width 0.1s ease;
        }

        .video-control-buttons {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .control-btn {
            background: none;
            border: none;
            color: white;
            cursor: pointer;
            padding: 5px;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: transform 0.2s ease;
        }

        .control-btn:hover {
            transform: scale(1.2);
        }

        .video-time {
            color: white;
            font-size: 13px;
            margin-left: auto;
        }

        .video-info {
            padding: 20px;
        }

        .video-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 12px;
            color: #FFFFFF;
            line-height: 1.4;
        }

        .video-meta {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
            font-size: 14px;
            color: #8B95A1;
        }

        .meta-item {
            display: flex;
            align-items: center;
            gap: 6px;
        }

        /* Quality Selector */
        .quality-selector {
            margin-bottom: 20px;
        }

        .quality-label {
            font-size: 14px;
            color: #8B95A1;
            margin-bottom: 12px;
            display: block;
        }

        .quality-options {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            gap: 10px;
        }

        .quality-option {
            padding: 12px;
            background-color: #0F1419;
            border: 2px solid #2A3441;
            border-radius: 10px;
            cursor: pointer;
            text-align: center;
            transition: all 0.3s ease;
            font-size: 14px;
            font-weight: 500;
        }

        .quality-option:hover {
            border-color: #00BCD4;
            background-color: rgba(0, 188, 212, 0.05);
        }

        .quality-option.selected {
            border-color: #00BCD4;
            background: linear-gradient(135deg, rgba(0, 188, 212, 0.2) 0%, rgba(0, 172, 193, 0.2) 100%);
            color: #00BCD4;
        }

        .quality-badge {
            display: block;
            font-size: 16px;
            font-weight: 600;
            margin-bottom: 4px;
        }

        .quality-size {
            font-size: 11px;
            color: #8B95A1;
        }

        /* Download Button */
        .download-btn {
            width: 100%;
            padding: 18px;
            font-size: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .download-btn svg {
            animation: downloadPulse 2s ease-in-out infinite;
        }

        @keyframes downloadPulse {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-3px); }
        }

        /* Notification */
        .notification {
            position: fixed;
            top: 20px;
            right: 20px;
            background-color: #1A1F28;
            padding: 16px 24px;
            border-radius: 12px;
            box-shadow: 0 8px 24px rgba(0, 0, 0, 0.3);
            display: flex;
            align-items: center;
            gap: 12px;
            transform: translateX(400px);
            transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            z-index: 1000;
            max-width: 350px;
        }

        .notification.show {
            transform: translateX(0);
        }

        .notification.success { border-left: 4px solid #4CAF50; }
        .notification.error { border-left: 4px solid #F44336; }
        .notification.info { border-left: 4px solid #00BCD4; }

        /* History */
        .history-list {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .history-item {
            display: flex;
            gap: 12px;
            background-color: #1A1F28;
            padding: 12px;
            border-radius: 12px;
            transition: all 0.3s ease;
            animation: historySlideIn 0.4s cubic-bezier(0.4, 0, 0.2, 1) backwards;
        }

        @keyframes historySlideIn {
            from {
                opacity: 0;
                transform: translateX(-20px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .history-item:hover {
            background-color: #202833;
            transform: translateX(4px);
        }

        .history-thumb {
            width: 120px;
            height: 68px;
            object-fit: cover;
            border-radius: 8px;
            flex-shrink: 0;
        }

        .history-info {
            flex: 1;
            min-width: 0;
        }

        .history-title {
            font-size: 14px;
            font-weight: 500;
            margin-bottom: 6px;
            color: #FFFFFF;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
        }

        .history-meta {
            font-size: 12px;
            color: #8B95A1;
            margin-bottom: 8px;
        }

        .history-actions {
            display: flex;
            gap: 8px;
        }

        .history-btn {
            padding: 6px 12px;
            font-size: 12px;
            background-color: #0F1419;
            border: 1px solid #2A3441;
            color: #00BCD4;
            box-shadow: none;
        }

        .history-btn:hover {
            background-color: #00BCD4;
            color: #FFFFFF;
            border-color: #00BCD4;
        }

        .empty-state {
            text-align: center;
            padding: 60px 20px;
            color: #8B95A1;
        }

        .empty-icon {
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state p {
            font-size: 15px;
        }

        /* Supported Platforms */
        .platforms {
            margin-top: 40px;
        }

        .platforms-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 20px;
            color: #FFFFFF;
            text-align: center;
        }

        .platforms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(140px, 1fr));
            gap: 12px;
        }

        .platform-card {
            background-color: #1A1F28;
            padding: 16px;
            border-radius: 12px;
            text-align: center;
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .platform-card:hover {
            border-color: #00BCD4;
            transform: translateY(-4px);
            box-shadow: 0 8px 20px rgba(0, 188, 212, 0.2);
        }

        .platform-icon {
            margin-bottom: 8px;
            display: flex;
            align-items: center;
            justify-content: center;
            height: 40px;
        }

        .platform-icon svg {
            transition: transform 0.3s ease;
        }

        .platform-card:hover .platform-icon svg {
            transform: scale(1.1);
        }

        .platform-name {
            font-size: 14px;
            font-weight: 500;
            color: #FFFFFF;
        }

        @media (max-width: 640px) {
            .input-group {
                flex-direction: column;
            }

            .platforms-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }
    </style>
</head>
<body>
    <!-- Cloudflare Loading -->
    <div class="cloudflare-loading" id="cfLoading">
        <!-- Logo with Power Rings -->
        <div class="cf-logo-container">
            <!-- Cloudflare Official Logo SVG -->
            <svg class="cf-logo" viewBox="0 0 100 100" xmlns="http://www.w3.org/2000/svg">
                <!-- Cloudflare Cloud Icon -->
                <defs>
                    <linearGradient id="cfGradient" x1="0%" y1="0%" x2="100%" y2="100%">
                        <stop offset="0%" style="stop-color:#F6851B;stop-opacity:1" />
                        <stop offset="100%" style="stop-color:#FF9500;stop-opacity:1" />
                    </linearGradient>
                </defs>
                
                <!-- Main Cloudflare Logo Shape -->
                <path fill="url(#cfGradient)" d="M72.5,51.6c-0.3-0.1-0.6-0.2-1-0.2H59.8c-0.5,0-0.8-0.3-0.7-0.8c0.8-3.5-0.5-7.2-3.4-9.4c-2-1.5-4.4-2.2-6.9-2c-4.8,0.4-8.8,4.1-9.8,8.9c-0.1,0.5-0.5,0.9-1,0.9H27.5c-0.5,0-0.9,0.4-0.8,0.9c1.1,6.8,7,11.9,14,11.9h31.8c5.5,0,10-4.5,10-10C82.5,56.1,78,51.6,72.5,51.6z"/>
                
                <!-- Secondary cloud element -->
                <path fill="url(#cfGradient)" opacity="0.8" d="M35.2,45.2c-0.2-0.8-0.3-1.6-0.3-2.5c0-6.2,5-11.2,11.2-11.2c4.8,0,8.9,3,10.5,7.2c0.2,0.5,0.7,0.8,1.2,0.7c0.6-0.1,1.2-0.2,1.8-0.2c6.5,0,11.8,5.3,11.8,11.8c0,0.3,0,0.6,0,0.9"/>
                
                <!-- Electric bolt effect -->
                <path fill="#FFF" opacity="0.9" d="M50,25 L48,40 L54,40 L46,60 L50,45 L44,45 Z">
                    <animate attributeName="opacity" values="0.9;0.3;0.9" dur="1.5s" repeatCount="indefinite"/>
                </path>
            </svg>
            
            <!-- Power Rings -->
            <div class="power-ring"></div>
            <div class="power-ring"></div>
            <div class="power-ring"></div>
            
            <!-- Energy Particles -->
            <div class="energy-particles">
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
                <div class="particle"></div>
            </div>
        </div>
        
        <!-- Progress Bar -->
        <div class="cf-progress-container">
            <div class="cf-progress-bar">
                <div class="cf-progress-fill"></div>
            </div>
        </div>
        
        <!-- Status Text -->
        <div class="cf-status-container">
            <div class="cf-status-text">Powering up DownAnyL...</div>
            <div class="cf-status-subtext">Establishing secure connection through Cloudflare network</div>
            
            <!-- Security Badge -->
            <div class="cf-security-badge">
                <svg class="cf-security-icon" viewBox="0 0 24 24" fill="none" stroke="#F6851B" stroke-width="2">
                    <path d="M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z"/>
                    <path d="M9 12l2 2 4-4"/>
                </svg>
                <span class="cf-security-text">SECURED BY CLOUDFLARE</span>
            </div>
        </div>
    </div>

    <!-- Download Page -->
    <div class="page active" id="downloadPage">
        <div class="container">
            <div class="header">
                <div class="logo">
                    <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                        <path d="M12 3L12 16M12 16L8 12M12 16L16 12" stroke="#00BCD4" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                        <path d="M3 17L3 18C3 19.6569 4.34315 21 6 21L18 21C19.6569 21 21 19.6569 21 18V17" stroke="#00BCD4" stroke-width="2" stroke-linecap="round"/>
                        <circle cx="12" cy="12" r="11" stroke="#00BCD4" stroke-width="1" opacity="0.2"/>
                    </svg>
                </div>
                <h1 class="title">DownAnyL</h1>
                <p class="subtitle">Download videos from any platform - Fast & Free</p>
            </div>

            <div class="input-section">
                <div class="input-group">
                    <div class="input-wrapper">
                        <input type="text" id="videoUrl" placeholder="Paste video link here..." autocomplete="off">
                        <div class="input-icon">
                            <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                                <path d="M10 13C10.4295 13.5741 10.9774 14.0492 11.6066 14.3929C12.2357 14.7367 12.9315 14.9411 13.6467 14.9923C14.3618 15.0435 15.0796 14.9404 15.7513 14.6897C16.4231 14.4391 17.0331 14.0471 17.54 13.54L20.54 10.54C21.4508 9.59699 21.9548 8.33398 21.9434 7.02299C21.932 5.71201 21.4061 4.45794 20.4791 3.5309C19.5521 2.60387 18.298 2.07802 16.987 2.06663C15.676 2.05524 14.413 2.55921 13.47 3.47L11.75 5.18" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                                <path d="M14 11C13.5705 10.4259 13.0226 9.95084 12.3934 9.60707C11.7642 9.26331 11.0685 9.05889 10.3533 9.00768C9.63819 8.95646 8.92037 9.05963 8.24861 9.31029C7.57685 9.56095 6.96684 9.9529 6.45996 10.46L3.45996 13.46C2.54917 14.403 2.04519 15.666 2.05659 16.977C2.06798 18.288 2.59383 19.542 3.52086 20.4691C4.44789 21.3961 5.70197 21.922 7.01295 21.9334C8.32393 21.9447 9.58694 21.4408 10.53 20.53L12.24 18.82" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                    </div>
                    <button id="findBtn">Find Video</button>
                </div>
            </div>

            <div class="video-preview" id="videoPreview">
                <div class="video-player-container">
                    <video class="video-player" id="videoPlayer" preload="metadata"></video>
                    <img id="thumbnail" class="video-thumbnail" alt="Video thumbnail">
                    <div class="play-button-overlay" id="playButton">
                        <svg width="40" height="40" viewBox="0 0 24 24" fill="white">
                            <path d="M8 5v14l11-7z"/>
                        </svg>
                    </div>
                    <div class="video-controls" id="videoControls">
                        <div class="video-progress" id="videoProgress">
                            <div class="video-progress-filled" id="videoProgressFilled"></div>
                        </div>
                        <div class="video-control-buttons">
                            <button class="control-btn" id="playPauseBtn">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="white">
                                    <path d="M8 5v14l11-7z"/>
                                </svg>
                            </button>
                            <button class="control-btn" id="muteBtn">
                                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2">
                                    <polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon>
                                    <path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path>
                                </svg>
                            </button>
                            <span class="video-time" id="videoTime">0:00 / 0:00</span>
                        </div>
                    </div>
                </div>
                <div class="video-info">
                    <h2 class="video-title" id="videoTitle">Video Title</h2>
                    <div class="video-meta">
                        <div class="meta-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                                <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                            </svg>
                            <span id="videoDuration">0:00</span>
                        </div>
                        <div class="meta-item">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                                <rect x="2" y="6" width="20" height="12" rx="2" stroke="currentColor" stroke-width="2"/>
                                <path d="M22 9L18 12L22 15V9Z" stroke="currentColor" stroke-width="2" stroke-linejoin="round"/>
                            </svg>
                            <span id="videoSize">Platform</span>
                        </div>
                    </div>

                    <div class="quality-selector" id="qualitySelector">
                        <label class="quality-label">Select Quality:</label>
                        <div class="quality-options" id="qualityOptions">
                            <!-- Quality options will be inserted here -->
                        </div>
                    </div>

                    <button class="download-btn" id="downloadBtn">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                            <path d="M12 3V16M12 16L8 12M12 16L16 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            <path d="M3 17V18C3 19.6569 4.34315 21 6 21H18C19.6569 21 21 19.6569 21 18V17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                        Download Video
                    </button>
                </div>
            </div>

            <div class="platforms">
                <h3 class="platforms-title">SUPPORTED PLATFORMS</h3>
                <div class="platforms-grid">
                    <div class="platform-card">
                        <div class="platform-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="#FF0000">
                                <path d="M23.498 6.186a3.016 3.016 0 0 0-2.122-2.136C19.505 3.545 12 3.545 12 3.545s-7.505 0-9.377.505A3.017 3.017 0 0 0 .502 6.186C0 8.07 0 12 0 12s0 3.93.502 5.814a3.016 3.016 0 0 0 2.122 2.136c1.871.505 9.376.505 9.376.505s7.505 0 9.377-.505a3.015 3.015 0 0 0 2.122-2.136C24 15.93 24 12 24 12s0-3.93-.502-5.814zM9.545 15.568V8.432L15.818 12l-6.273 3.568z"/>
                            </svg>
                        </div>
                        <div class="platform-name">YouTube</div>
                    </div>
                    <div class="platform-card">
                        <div class="platform-icon">
                            <svg width="32" height="32" viewBox="0 0 32 32" fill="#000000">
                                <path d="M16.656 1.029c1.637-0.025 3.262-0.012 4.886-0.025 0.054 2.031 0.878 3.859 2.189 5.213l-0.002-0.002c1.411 1.271 3.247 2.095 5.271 2.235l0.028 0.002v5.036c-1.912-0.048-3.71-0.489-5.331-1.247l0.082 0.034c-0.784-0.377-1.447-0.764-2.077-1.196l0.052 0.034c-0.012 3.649 0.012 7.298-0.025 10.934-0.103 1.853-0.719 3.543-1.707 4.954l0.020-0.031c-1.652 2.366-4.328 3.919-7.371 4.011l-0.014 0c-0.123 0.006-0.268 0.009-0.414 0.009-1.73 0-3.347-0.482-4.725-1.319l0.040 0.023c-2.508-1.509-4.238-4.091-4.558-7.094l-0.004-0.041c-0.025-0.625-0.037-1.25-0.012-1.862 0.49-4.779 4.494-8.476 9.361-8.476 0.547 0 1.083 0.047 1.604 0.136l-0.056-0.008c0.025 1.849-0.050 3.699-0.050 5.548-0.423-0.153-0.911-0.242-1.42-0.242-1.868 0-3.457 1.194-4.045 2.861l-0.009 0.030c-0.133 0.427-0.21 0.918-0.21 1.426 0 0.206 0.013 0.41 0.037 0.61l-0.002-0.024c0.332 2.046 2.086 3.59 4.201 3.59 0.061 0 0.121-0.001 0.181-0.004l-0.009 0c1.463-0.044 2.733-0.831 3.451-1.994l0.010-0.018c0.267-0.372 0.45-0.822 0.511-1.311l0.001-0.014c0.125-2.237 0.075-4.461 0.087-6.698 0.012-5.036-0.012-10.060 0.025-15.083z"/>
                            </svg>
                        </div>
                        <div class="platform-name">TikTok</div>
                    </div>
                    <div class="platform-card">
                        <div class="platform-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="url(#instagram-gradient)">
                                <defs>
                                    <linearGradient id="instagram-gradient" x1="0%" y1="100%" x2="100%" y2="0%">
                                        <stop offset="0%" style="stop-color:#FD5949;stop-opacity:1" />
                                        <stop offset="50%" style="stop-color:#D6249F;stop-opacity:1" />
                                        <stop offset="100%" style="stop-color:#285AEB;stop-opacity:1" />
                                    </linearGradient>
                                </defs>
                                <path d="M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"/>
                            </svg>
                        </div>
                        <div class="platform-name">Instagram</div>
                    </div>
                    <div class="platform-card">
                        <div class="platform-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="#1DA1F2">
                                <path d="M23.953 4.57a10 10 0 01-2.825.775 4.958 4.958 0 002.163-2.723c-.951.555-2.005.959-3.127 1.184a4.92 4.92 0 00-8.384 4.482C7.69 8.095 4.067 6.13 1.64 3.162a4.822 4.822 0 00-.666 2.475c0 1.71.87 3.213 2.188 4.096a4.904 4.904 0 01-2.228-.616v.06a4.923 4.923 0 003.946 4.827 4.996 4.996 0 01-2.212.085 4.936 4.936 0 004.604 3.417 9.867 9.867 0 01-6.102 2.105c-.39 0-.779-.023-1.17-.067a13.995 13.995 0 007.557 2.209c9.053 0 13.998-7.496 13.998-13.985 0-.21 0-.42-.015-.63A9.935 9.935 0 0024 4.59z"/>
                            </svg>
                        </div>
                        <div class="platform-name">Twitter/X</div>
                    </div>
                    <div class="platform-card">
                        <div class="platform-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="#1877F2">
                                <path d="M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"/>
                            </svg>
                        </div>
                        <div class="platform-name">Facebook</div>
                    </div>
                    <div class="platform-card">
                        <div class="platform-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="#1AB7EA">
                                <path d="M23.977 6.416c-.105 2.338-1.739 5.543-4.894 9.609-3.268 4.247-6.026 6.37-8.29 6.37-1.409 0-2.578-1.294-3.553-3.881L5.322 11.4C4.603 8.816 3.834 7.522 3.01 7.522c-.179 0-.806.378-1.881 1.132L0 7.197a315.065 315.065 0 003.501-3.128C5.08 2.701 6.266 1.984 7.055 1.91c1.867-.18 3.016 1.1 3.447 3.838.465 2.953.789 4.789.971 5.507.539 2.45 1.131 3.674 1.776 3.674.502 0 1.256-.796 2.265-2.385 1.004-1.589 1.54-2.797 1.612-3.628.144-1.371-.395-2.061-1.614-2.061-.574 0-1.167.121-1.777.391 1.186-3.868 3.434-5.757 6.762-5.637 2.473.06 3.628 1.664 3.493 4.797l-.013.01z"/>
                            </svg>
                        </div>
                        <div class="platform-name">Vimeo</div>
                    </div>
                    <div class="platform-card">
                        <div class="platform-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="#FF4500">
                                <path d="M12 0C5.373 0 0 5.373 0 12c0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23A11.509 11.509 0 0112 5.803c1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576C20.566 21.797 24 17.3 24 12c0-6.627-5.373-12-12-12z"/>
                            </svg>
                        </div>
                        <div class="platform-name">Reddit</div>
                    </div>
                    <div class="platform-card">
                        <div class="platform-icon">
                            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="#00BCD4" stroke-width="2">
                                <circle cx="12" cy="12" r="10"/>
                                <path d="M2 12h20M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"/>
                            </svg>
                        </div>
                        <div class="platform-name">& 1000+</div>
                    </div>
                </div>
                <p style="text-align: center; margin-top: 24px; font-size: 14px; color: #00BCD4; font-weight: 600; letter-spacing: 2px;">BY RIKKIUU</p>
            </div>
        </div>
    </div>

    <!-- History Page -->
    <div class="page" id="historyPage">
        <div class="container">
            <div class="header">
                <h1 class="title">Download History</h1>
                <p class="subtitle">Your recent downloads</p>
            </div>
            <div class="history-list" id="historyList"></div>
        </div>
    </div>

    <!-- Bottom Navigation -->
    <nav class="bottom-nav">
        <div class="nav-item active" data-page="downloadPage">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <path d="M12 3V16M12 16L8 12M12 16L16 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                <path d="M3 17V18C3 19.6569 4.34315 21 6 21H18C19.6569 21 21 19.6569 21 18V17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
            </svg>
            <span class="nav-label">Download</span>
        </div>
        <div class="nav-item" data-page="historyPage">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none">
                <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                <path d="M12 6V12L16 14" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            </svg>
            <span class="nav-label">History</span>
        </div>
    </nav>

    <!-- Notification -->
    <div class="notification" id="notification">
        <svg width="20" height="20" viewBox="0 0 24 24" fill="none" id="notifIcon">
            <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
            <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
        </svg>
        <span id="notifText">Success!</span>
    </div>

    <script>
        // Elements
        const videoUrlInput = document.getElementById('videoUrl');
        const findBtn = document.getElementById('findBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const cfLoading = document.getElementById('cfLoading');
        const videoPreview = document.getElementById('videoPreview');
        const qualityOptions = document.getElementById('qualityOptions');
        const historyList = document.getElementById('historyList');
        const navItems = document.querySelectorAll('.nav-item');
        const pages = document.querySelectorAll('.page');
        const notification = document.getElementById('notification');

        // Video player elements
        const videoPlayer = document.getElementById('videoPlayer');
        const thumbnail = document.getElementById('thumbnail');
        const playButton = document.getElementById('playButton');
        const videoControls = document.getElementById('videoControls');
        const playPauseBtn = document.getElementById('playPauseBtn');
        const muteBtn = document.getElementById('muteBtn');
        const videoProgress = document.getElementById('videoProgress');
        const videoProgressFilled = document.getElementById('videoProgressFilled');
        const videoTime = document.getElementById('videoTime');

        // State
        let currentVideoData = null;
        let selectedQuality = 'best';
        let downloadHistory = JSON.parse(localStorage.getItem('downloadHistory') || '[]');

        // Navigation
        navItems.forEach(item => {
            item.addEventListener('click', () => {
                const pageId = item.getAttribute('data-page');
                
                navItems.forEach(nav => nav.classList.remove('active'));
                pages.forEach(page => page.classList.remove('active'));
                
                item.classList.add('active');
                document.getElementById(pageId).classList.add('active');
                
                if (pageId === 'historyPage') {
                    renderHistory();
                }
            });
        });

        // Video Player Controls
        playButton.addEventListener('click', playVideo);
        playPauseBtn.addEventListener('click', togglePlayPause);
        muteBtn.addEventListener('click', toggleMute);

        videoPlayer.addEventListener('timeupdate', updateProgress);
        videoPlayer.addEventListener('ended', () => {
            playButton.classList.remove('hidden');
            playPauseBtn.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg>';
        });

        videoProgress.addEventListener('click', seek);

        function playVideo() {
            if (currentVideoData && currentVideoData.videoUrl) {
                videoPlayer.src = currentVideoData.videoUrl;
                videoPlayer.play();
                thumbnail.classList.add('hidden');
                playButton.classList.add('hidden');
                videoControls.classList.add('show');
            } else {
                showNotification('Video URL not available', 'error');
            }
        }

        function togglePlayPause() {
            if (videoPlayer.paused) {
                videoPlayer.play();
                playPauseBtn.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="white"><rect x="6" y="4" width="4" height="16"/><rect x="14" y="4" width="4" height="16"/></svg>';
            } else {
                videoPlayer.pause();
                playPauseBtn.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="white"><path d="M8 5v14l11-7z"/></svg>';
            }
        }

        function toggleMute() {
            videoPlayer.muted = !videoPlayer.muted;
            if (videoPlayer.muted) {
                muteBtn.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><line x1="23" y1="9" x2="17" y2="15"></line><line x1="17" y1="9" x2="23" y2="15"></line></svg>';
            } else {
                muteBtn.innerHTML = '<svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="white" stroke-width="2"><polygon points="11 5 6 9 2 9 2 15 6 15 11 19 11 5"></polygon><path d="M19.07 4.93a10 10 0 0 1 0 14.14M15.54 8.46a5 5 0 0 1 0 7.07"></path></svg>';
            }
        }

        function updateProgress() {
            const progress = (videoPlayer.currentTime / videoPlayer.duration) * 100;
            videoProgressFilled.style.width = progress + '%';
            
            const currentMinutes = Math.floor(videoPlayer.currentTime / 60);
            const currentSeconds = Math.floor(videoPlayer.currentTime % 60);
            const durationMinutes = Math.floor(videoPlayer.duration / 60);
            const durationSeconds = Math.floor(videoPlayer.duration % 60);
            
            videoTime.textContent = `${currentMinutes}:${currentSeconds.toString().padStart(2, '0')} / ${durationMinutes}:${durationSeconds.toString().padStart(2, '0')}`;
        }

        function seek(e) {
            const rect = videoProgress.getBoundingClientRect();
            const pos = (e.clientX - rect.left) / rect.width;
            videoPlayer.currentTime = pos * videoPlayer.duration;
        }

        // Find video
        findBtn.addEventListener('click', async () => {
            const url = videoUrlInput.value.trim();
            
            if (!url) {
                showNotification('Please enter a video URL', 'error');
                return;
            }

            if (!isValidUrl(url)) {
                showNotification('Please enter a valid URL', 'error');
                return;
            }

            await fetchVideoInfo(url);
        });

        // Download video
        downloadBtn.addEventListener('click', async () => {
            if (!currentVideoData) return;
            
            downloadBtn.disabled = true;
            downloadBtn.innerHTML = `
                <div style="width: 20px; height: 20px; border: 2px solid rgba(255,255,255,0.3); border-top-color: white; border-radius: 50%; animation: spin 0.8s linear infinite;"></div>
                Downloading...
            `;
            
            await downloadVideo();
            
            downloadBtn.disabled = false;
            downloadBtn.innerHTML = `
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none">
                    <path d="M12 3V16M12 16L8 12M12 16L16 12" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <path d="M3 17V18C3 19.6569 4.34315 21 6 21H18C19.6569 21 21 19.6569 21 18V17" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                </svg>
                Download Video
            `;
        });

        // Enter key support
        videoUrlInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') findBtn.click();
        });

        // Functions
        async function fetchVideoInfo(url) {
            // Show Cloudflare loading
            cfLoading.classList.add('show');
            videoPreview.classList.remove('show');

            // Simulate security check
            await new Promise(resolve => setTimeout(resolve, 3000));

            try {
                const platform = detectPlatform(url);
                
                // Try cobalt.tools API first
                const response = await fetch('https://api.cobalt.tools/api/json', {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        url: url,
                        vCodec: 'h264',
                        vQuality: '1080',
                        aFormat: 'mp3',
                        isAudioOnly: false,
                        isTTFullAudio: false,
                        isAudioMuted: false,
                        dubLang: false,
                        disableMetadata: false
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    
                    // Extract video info
                    const videoData = {
                        url: url,
                        originalUrl: url,
                        platform: platform,
                        title: extractTitle(url, platform),
                        thumbnail: data.thumb || generatePlaceholderImage(platform),
                        duration: 'Unknown',
                        downloadUrl: data.url || url,
                        videoUrl: data.url || null, // For video player
                        qualities: []
                    };

                    // Generate quality options
                    videoData.qualities = generateQualityOptions(platform);

                    currentVideoData = videoData;
                    displayVideoInfo(videoData);
                    
                } else {
                    throw new Error('API request failed');
                }

            } catch (error) {
                console.error('Error fetching video:', error);
                
                // Fallback: still show preview with basic info
                const platform = detectPlatform(url);
                const videoData = {
                    url: url,
                    originalUrl: url,
                    platform: platform,
                    title: extractTitle(url, platform),
                    thumbnail: generatePlaceholderImage(platform),
                    duration: 'Unknown',
                    downloadUrl: url,
                    videoUrl: null,
                    qualities: generateQualityOptions(platform)
                };

                currentVideoData = videoData;
                displayVideoInfo(videoData);
            } finally {
                cfLoading.classList.remove('show');
            }
        }

        async function downloadVideo() {
            if (!currentVideoData) return;

            const url = currentVideoData.originalUrl;
            const platform = currentVideoData.platform;

            try {
                addToHistory(currentVideoData);

                // Try cobalt.tools API with selected quality
                const qualityMap = {
                    'best': '1080',
                    'high': '720',
                    'medium': '480',
                    'low': '360'
                };

                const response = await fetch('https://api.cobalt.tools/api/json', {
                    method: 'POST',
                    headers: {
                        'Accept': 'application/json',
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        url: url,
                        vCodec: 'h264',
                        vQuality: qualityMap[selectedQuality] || '1080',
                        aFormat: 'mp3',
                        isAudioOnly: false,
                        isTTFullAudio: false,
                        isAudioMuted: false,
                        dubLang: false,
                        disableMetadata: false
                    })
                });

                if (response.ok) {
                    const data = await response.json();
                    
                    if (data.status === 'redirect' || data.url) {
                        // Direct download
                        const downloadUrl = data.url;
                        const a = document.createElement('a');
                        a.href = downloadUrl;
                        a.download = `${currentVideoData.title}.mp4`;
                        a.target = '_blank';
                        document.body.appendChild(a);
                        a.click();
                        document.body.removeChild(a);
                        
                        showNotification('Download started! Check your downloads folder', 'success');
                        return;
                    } else if (data.picker) {
                        // Multiple files
                        if (data.picker.length > 0) {
                            const downloadUrl = data.picker[0].url;
                            const a = document.createElement('a');
                            a.href = downloadUrl;
                            a.download = `${currentVideoData.title}.mp4`;
                            a.target = '_blank';
                            document.body.appendChild(a);
                            a.click();
                            document.body.removeChild(a);
                            
                            showNotification('Download started!', 'success');
                            return;
                        }
                    }
                }

                // Fallback
                let success = false;

                if (platform === 'TikTok') {
                    success = await downloadTikTok(url);
                } else if (platform === 'Instagram') {
                    success = await downloadInstagram(url);
                }

                if (!success) {
                    showNotification('Download initiated! If it doesn\'t start, try a different quality', 'info');
                }

            } catch (error) {
                console.error('Download error:', error);
                showNotification('Download failed. Please try again', 'error');
            }
        }

        async function downloadTikTok(url) {
            try {
                const response = await fetch(`https://api.tiklydown.eu.org/api/download?url=${encodeURIComponent(url)}`);
                const data = await response.json();
                
                if (data.video && data.video.noWatermark) {
                    const a = document.createElement('a');
                    a.href = data.video.noWatermark;
                    a.download = 'tiktok-video.mp4';
                    a.target = '_blank';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    showNotification('TikTok download started!', 'success');
                    return true;
                }
            } catch (e) {
                console.log('TikTok download failed:', e);
            }
            return false;
        }

        async function downloadInstagram(url) {
            try {
                const response = await fetch(`https://api.downloadgram.org/media?url=${encodeURIComponent(url)}`);
                const data = await response.json();
                
                if (data.url) {
                    const a = document.createElement('a');
                    a.href = data.url;
                    a.download = 'instagram-video.mp4';
                    a.target = '_blank';
                    document.body.appendChild(a);
                    a.click();
                    document.body.removeChild(a);
                    
                    showNotification('Instagram download started!', 'success');
                    return true;
                }
            } catch (e) {
                console.log('Instagram download failed:', e);
            }
            return false;
        }

        function displayVideoInfo(info) {
            currentVideoData = info;
            
            const thumbnailElement = document.getElementById('thumbnail');
            thumbnailElement.onerror = function() {
                this.src = generatePlaceholderImage(info.platform);
                this.onerror = null;
            };
            thumbnailElement.src = info.thumbnail;
            thumbnailElement.classList.remove('hidden');
            
            // Reset video player
            videoPlayer.src = '';
            playButton.classList.remove('hidden');
            videoControls.classList.remove('show');
            
            document.getElementById('videoTitle').textContent = info.title;
            document.getElementById('videoDuration').textContent = info.duration;
            document.getElementById('videoSize').textContent = `Platform: ${info.platform}`;
            
            // Render quality options
            renderQualityOptions(info.qualities);
            
            videoPreview.classList.add('show');
        }

        function renderQualityOptions(qualities) {
            qualityOptions.innerHTML = qualities.map(q => `
                <div class="quality-option ${q.value === selectedQuality ? 'selected' : ''}" data-quality="${q.value}">
                    <span class="quality-badge">${q.label}</span>
                    <span class="quality-size">${q.size}</span>
                </div>
            `).join('');

            document.querySelectorAll('.quality-option').forEach(option => {
                option.addEventListener('click', () => {
                    selectedQuality = option.getAttribute('data-quality');
                    document.querySelectorAll('.quality-option').forEach(o => o.classList.remove('selected'));
                    option.classList.add('selected');
                });
            });
        }

        function generateQualityOptions(platform) {
            const baseQualities = [
                { label: 'Best', value: 'best', size: '1080p' },
                { label: 'High', value: 'high', size: '720p' },
                { label: 'Medium', value: 'medium', size: '480p' },
                { label: 'Low', value: 'low', size: '360p' }
            ];

            if (platform === 'TikTok') {
                return [
                    { label: 'No Watermark', value: 'best', size: 'HD' },
                    { label: 'With Watermark', value: 'medium', size: 'SD' }
                ];
            }

            return baseQualities;
        }

        function generatePlaceholderImage(platform) {
            const colors = {
                'YouTube': '#FF0000',
                'TikTok': '#000000',
                'Instagram': '#E4405F',
                'Twitter': '#1DA1F2',
                'Facebook': '#1877F2',
                'Vimeo': '#1AB7EA',
                'Reddit': '#FF4500'
            };

            const color = colors[platform] || '#00BCD4';
            
            return `data:image/svg+xml;base64,${btoa(`
                <svg width="640" height="360" viewBox="0 0 640 360" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="640" height="360" fill="#1A1F28"/>
                    <circle cx="320" cy="180" r="60" stroke="${color}" stroke-width="4" fill="none"/>
                    <path d="M300 160 L300 200 L340 180 Z" fill="${color}"/>
                    <text x="320" y="260" font-family="Arial" font-size="24" fill="#8B95A1" text-anchor="middle">${platform} Video</text>
                </svg>
            `)}`;
        }

        function addToHistory(videoData) {
            const historyItem = {
                ...videoData,
                downloadedAt: new Date().toISOString(),
                quality: selectedQuality
            };
            
            downloadHistory.unshift(historyItem);
            if (downloadHistory.length > 50) downloadHistory.pop();
            
            localStorage.setItem('downloadHistory', JSON.stringify(downloadHistory));
        }

        function renderHistory() {
            if (downloadHistory.length === 0) {
                historyList.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
                                <path d="M8 22.0002H16C18.8284 22.0002 20.2426 22.0002 21.1213 21.1215C22 20.2429 22 18.8286 22 16.0002V15.0002C22 12.1718 22 10.7576 21.1213 9.8789C20.3529 9.11051 19.175 9.01406 17 9.00195M7 9.00195C4.82497 9.01406 3.64706 9.11051 2.87868 9.87889C2 10.7576 2 12.1718 2 15.0002L2 16.0002C2 18.8286 2 20.2429 2.87868 21.1215C3.17848 21.4213 3.54062 21.6188 4 21.749" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M12 2L12 15M12 15L9 11.5M12 15L15 11.5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <p>No download history yet</p>
                        <p style="font-size: 13px; margin-top: 8px;">Start downloading videos to see them here</p>
                    </div>
                `;
                return;
            }

            historyList.innerHTML = downloadHistory.map((item, index) => `
                <div class="history-item" style="animation-delay: ${index * 0.05}s">
                    <img src="${item.thumbnail}" class="history-thumb" alt="Thumbnail" onerror="this.src='${generatePlaceholderImage(item.platform)}'; this.onerror=null;">
                    <div class="history-info">
                        <div class="history-title">${item.title}</div>
                        <div class="history-meta">${item.platform}  ${formatDate(item.downloadedAt)}</div>
                        <div class="history-actions">
                            <button class="history-btn" onclick="redownload('${item.originalUrl}')">Download Again</button>
                            <button class="history-btn" onclick="deleteHistory(${index})">Delete</button>
                        </div>
                    </div>
                </div>
            `).join('');
        }

        window.redownload = (url) => {
            videoUrlInput.value = url;
            navItems[0].click();
            findBtn.click();
        };

        window.deleteHistory = (index) => {
            downloadHistory.splice(index, 1);
            localStorage.setItem('downloadHistory', JSON.stringify(downloadHistory));
            renderHistory();
            showNotification('Deleted from history', 'success');
        };

        function formatDate(isoString) {
            const date = new Date(isoString);
            const now = new Date();
            const diff = now - date;
            
            if (diff < 60000) return 'Just now';
            if (diff < 3600000) return Math.floor(diff / 60000) + 'm ago';
            if (diff < 86400000) return Math.floor(diff / 3600000) + 'h ago';
            return Math.floor(diff / 86400000) + 'd ago';
        }

        function detectPlatform(url) {
            if (url.includes('youtube.com') || url.includes('youtu.be')) return 'YouTube';
            if (url.includes('facebook.com')) return 'Facebook';
            if (url.includes('instagram.com')) return 'Instagram';
            if (url.includes('twitter.com') || url.includes('x.com')) return 'Twitter';
            if (url.includes('tiktok.com')) return 'TikTok';
            if (url.includes('vimeo.com')) return 'Vimeo';
            if (url.includes('reddit.com')) return 'Reddit';
            return 'Unknown';
        }

        function extractTitle(url, platform) {
            const ytId = extractYouTubeId(url);
            if (ytId) return `YouTube Video - ${ytId}`;
            
            const now = new Date();
            const timestamp = now.toLocaleString('en-US', { 
                month: 'short', 
                day: 'numeric', 
                hour: '2-digit', 
                minute: '2-digit' 
            });
            
            return `${platform} Video - ${timestamp}`;
        }

        function extractYouTubeId(url) {
            const match = url.match(/(?:youtu\.be\/|youtube\.com(?:\/embed\/|\/v\/|\/watch\?v=|\/watch\?.+&v=))([\w-]{11})/);
            return match ? match[1] : null;
        }

        function isValidUrl(string) {
            try {
                new URL(string);
                return true;
            } catch (_) {
                return false;
            }
        }

        function showNotification(message, type = 'info') {
            const notif = document.getElementById('notification');
            const notifText = document.getElementById('notifText');
            const notifIcon = document.getElementById('notifIcon');
            
            notif.className = `notification ${type}`;
            notifText.textContent = message;
            
            if (type === 'success') {
                notifIcon.innerHTML = `
                    <path d="M9 12L11 14L15 10" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                `;
            } else if (type === 'error') {
                notifIcon.innerHTML = `
                    <path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                `;
            } else {
                notifIcon.innerHTML = `
                    <path d="M12 8V12M12 16H12.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
                `;
            }
            
            notif.classList.add('show');
            
            setTimeout(() => {
                notif.classList.remove('show');
            }, 3000);
        }

        // Initialize
        renderHistory();
    </script>
</body>
</html>
